<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.4.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Dylan Powers">

  
  
  
    
  
  <meta name="description" content="When to actually use the useCallback function in React">

  
  <link rel="alternate" hreflang="en-us" href="https://dylandpowers.github.io/post/when-to-use-usecallback/">

  


  

  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.3072054fc61fe865aa34bcb366de141d.css">

  

  
  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://dylandpowers.github.io/post/when-to-use-usecallback/">

  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Dylan Powers">
  <meta property="og:url" content="https://dylandpowers.github.io/post/when-to-use-usecallback/">
  <meta property="og:title" content="When to Use useCallback | Dylan Powers">
  <meta property="og:description" content="When to actually use the useCallback function in React"><meta property="og:image" content="https://dylandpowers.github.io/post/when-to-use-usecallback/featured.jpeg">
  <meta property="twitter:image" content="https://dylandpowers.github.io/post/when-to-use-usecallback/featured.jpeg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2021-08-15T21:10:54-04:00">
    
    <meta property="article:modified_time" content="2021-08-15T21:10:54-04:00">
  

  


  





  <title>When to Use useCallback | Dylan Powers</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Dylan Powers</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#experience"><span>Experience</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#skills"><span>Skills</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article" itemscope itemtype="http://schema.org/Article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">When to Use useCallback</h1>

  

  
    



<meta content="2021-08-15 21:10:54 -0400 EDT" itemprop="datePublished">
<meta content="2021-08-15 21:10:54 -0400 EDT" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>Aug 15, 2021</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    4 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/react/">React</a></span>
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://dylandpowers.github.io/post/when-to-use-usecallback/&amp;text=When%20to%20Use%20useCallback" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://dylandpowers.github.io/post/when-to-use-usecallback/&amp;t=When%20to%20Use%20useCallback" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=When%20to%20Use%20useCallback&amp;body=https://dylandpowers.github.io/post/when-to-use-usecallback/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://dylandpowers.github.io/post/when-to-use-usecallback/&amp;title=When%20to%20Use%20useCallback" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=When%20to%20Use%20useCallback%20https://dylandpowers.github.io/post/when-to-use-usecallback/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://dylandpowers.github.io/post/when-to-use-usecallback/&amp;title=When%20to%20Use%20useCallback" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      

<p>I&rsquo;ve worked with React a lot over the past few years. The more I work with it, the more I notice common mistakes that can slow down rendering as they pile up. Granted, in small applications (like most side projects), usually the rendering slowness will go unnoticed due to the size of the application. However, for larger applications, thinking about rendering speed becomes important.</p>

<p>One issue I see often is wrapping all function declarations in a component inside of a <a href="https://reactjs.org/docs/hooks-reference.html#usecallback" target="_blank">useCallback</a> hook. As per the React docs:</p>

<blockquote>
<p><code>useCallback</code> will return a memoized version of the callback that only changes if one of the dependencies has changed.</p>
</blockquote>

<p>Essentially, without <code>useCallback</code>, the function will be recreated on every render. It&rsquo;s important to remember that in JavaScript, functions are first-class objects just like a normal <code>Object</code> is. This essentially just means that the function can be stored as a variable, passed as an argument to a function, and returned from a function.</p>

<h1 id="without-usecallback">Without <code>useCallback</code></h1>

<p>Let&rsquo;s say we have a function <code>createUser</code> that is going to create a user by making an API call. The user details are stored in pieces of state within the component.</p>

<pre><code class="language-jsx">// SignupPage.jsx
const [email, setEmail] = useState('');
const [password, setPassword] = useState('');

const createUser = () =&gt; {
  UserAPI.createUser(email, password);
  redirectToHome();
};
</code></pre>

<p>We will return some JSX that will render the <code>input</code> elements, so we don&rsquo;t need to rely on other components to render the input form. Whenever a piece of state changes, React will re-render the component. This will recreate (among other things) all functions not wrapped in a <code>useCallback</code>.</p>

<p>This means that the <code>createUser</code> function above is created once for each render. This can become a larger performance hit in larger applications, but I&rsquo;ll show in the next section why it isn&rsquo;t the end of the world for this case.</p>

<h1 id="with-usecallback">With <code>useCallback</code></h1>

<p>Alternatively, we can wrap the function in a <code>useCallback</code> hook provided by the React library. This means that the function will not be re-evaluated unless something in the dependency array changes. Assuming that <code>UserAPI</code> and the <code>redirectToHome</code> function are both created outside of the component, we just need to declare <code>email</code> and <code>password</code> as dependencies.</p>

<pre><code class="language-jsx">// SignupPage.jsx
const [email, setEmail] = useState('');
const [password, setPassword] = useState('');

const createUser = useCallback(() =&gt; {
  UserAPI.createUser(email, password);
  redirectToHome();
}, [email, password]);
</code></pre>

<p>This means that, unless the <code>email</code> or <code>password</code> state changes, we will not recreate the <code>createUser</code> function. For example, if we had some <code>showInfoModal</code> state that would show some information about signing up, we could change that state without recreating the <code>createUser</code> function.</p>

<p>This seems like an improvement, right? Consider the fact that the above code is actually identical to the following:</p>

<pre><code class="language-jsx">// SignupPage.jsx
const [email, setEmail] = useState('');
const [password, setPassword] = useState('');

const nonMemoizedCreateUser = () =&gt; {
  UserAPI.createUser(email, password);
  redirectToHome();
};

const createUser = useCallback(nonMemoizedCreateUser, [email, password]);
</code></pre>

<p>So, the original function is actually still created, and we are doing even more work than before! In this instance, it seems quite wasteful. However, there are situations where <code>useCallback</code> is worth the extra cost.</p>

<h1 id="use-it-with-memoized-components">Use it With Memoized Components</h1>

<p>The best use case for <code>useCallback</code> is when creating memoized components; that is, components wrapped in an extra <code>React.memo()</code> function. This means that the component will not re-render unless the props <em>actually</em> change (or, of course,
component-held state changes).</p>

<p>Consider a situation where we have a separate <code>Button</code> component which will call the passed-in function when clicked. This component has a single prop representing the <code>createUser</code> function.</p>

<pre><code class="language-jsx">import React, { memo } from 'react';

const Button = (props) =&gt; {
  return (
    &lt;button onclick={props.createUser}&gt;Create User&lt;/button&gt;
  );
};

export default memo(Button);
</code></pre>

<p>This means that the <code>Button</code> component will not re-render unless the props change (React by default defines a &ldquo;change&rdquo; by shallowly comparing the current props to the previous props). If in the <code>SignupPage</code> component we do not wrap the function in a <code>useCallback</code>, then the reference will change every time, causing the <code>Button</code> component to re-render every time that the <code>SignupPage</code> component re-renders. However, if we wrap the prop in a <code>useCallback</code>, then we have much more fine-grained control over when the <code>Button</code> component re-renders.</p>

<hr />

<p>When making decisions on whether or not to use <code>useCallback</code>, there are always several factors at play. However, when relying on memoized components, wrapping function props in <code>useCallback</code>s is always a safe bet.</p>

    </div>

    


    

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/react/">React</a>
  
  <a class="badge badge-light" href="/tags/frontend/">Frontend</a>
  
  <a class="badge badge-light" href="/tags/javascript/">JavaScript</a>
  
  <a class="badge badge-light" href="/tags/hooks/">Hooks</a>
  
  <a class="badge badge-light" href="/tags/usecallbackl/">useCallbackl</a>
  
</div>



    
      








  





  
  
  
    
  
  
  <div class="media author-card" itemscope itemtype="http://schema.org/Person">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hu42b8eb9db929b08b309bfc601d27a140_1054508_250x250_fill_lanczos_center_2.png" itemprop="image" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title" itemprop="name"><a href="https://dylandpowers.github.io/">Dylan Powers</a></h5>
      <h6 class="card-subtitle">Software Engineer at Addepar</h6>
      <p class="card-text" itemprop="description">My interests include DevOps, web3, and React</p>
      <ul class="network-icon" aria-hidden="true">
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="/#contact" >
              <i class="fas fa-envelope"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://github.com/dylandpowers" target="_blank" rel="noopener">
              <i class="fab fa-github"></i>
            </a>
          </li>
        
          
          
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="/files/cv.pdf" >
              <i class="ai ai-cv"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/post/using-context-to-prevent-unnecessary-re-renders/">Using Context to Prevent Unnecessary Re Renders</a></li>
          
          <li><a href="/post/redux-without-redux-how-to-create-redux-like-functionality-using-react/">Redux Without Redux: How to Create Redux-like Functionality Using React</a></li>
          
          <li><a href="/post/essential-npm-packages-for-react-beginners/">Essential NPM Packages for React Beginners</a></li>
          
          <li><a href="/post/protected-routes-in-react/">Protected Routes in React using React-Router-Dom</a></li>
          
          <li><a href="/post/how-to-use-react-redux-firebase/">How to Use React-Redux-Firebase</a></li>
          
        </ul>
      </div>
      
    

    

    


  </div>
</article>

      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
    

    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.16bbb3750feb7244c9bc409a5a4fe678.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
